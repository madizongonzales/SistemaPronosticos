<!DOCTYPE html>
<html>
<head>
    <title>Seleccionar múltiples opciones</title>
</head>
<body>
    <form>
        <label for="opciones">Selecciona una o más opciones:</label>
        <select id="opciones" multiple>
            <option value="1">Opción 1</option>
            <option value="2">Opción 2</option>
            <option value="3">Opción 3</option>
        </select>
        <button id="btn">Obtener opciones seleccionadas</button>
    </form>
    <div id="campos">

    </div>

    <script>
        const btn = document.querySelector('#btn');
        const select = document.querySelector('#opciones');
        const campos = document.querySelector('#campos');

        btn.onclick = (e) => {
            e.preventDefault();
            campos.innerHTML = '';
            const selectedOptions = Array.from(select.options)
                .filter(option => option.selected)
                .map(option => ({text: option.text, value: option.value}));
            selectedOptions.forEach(option => {
                let numCampos;
                switch(option.value) {
                    case '1':
                        numCampos = 1;
                        break;
                    case '2':
                        numCampos = 3;
                        break;
                    case '3':
                        numCampos = 4;
                        break;
                    default:
                        numCampos = 0;
                }
                const container = document.createElement('div');
                container.style.marginTop = '20px';
                for(let i = 0; i < numCampos; i++) {
                    const label = document.createElement('label');
                    label.textContent = `Rellena para ${option.text} ${i+1}:`;
                    const input = document.createElement('input');
                    input.type = 'text';
                    container.appendChild(label);
                    container.appendChild(input);
                }
                campos.appendChild(container);
            });
        };
    </script>
</body>
</html>





<?php
if ($_SERVER["REQUEST_METHOD"] == "POST") {
    // Recuperar los datos del formulario
    $numPeriodos = $_POST["periodos"];
    $metodo = $_POST["metodo"];

    // Recuperar la demanda para cada periodo
    $demanda = array();
    for ($i = 1; $i <= $numPeriodos; $i++) {
        $demanda[] = $_POST["demanda_periodo_" . $i];
    }

    // Realizar los cálculos según el método seleccionado
    // Aquí debes incluir la lógica específica para cada método
    // y almacenar los resultados en un array $pronosticos
    $pronosticos = calcularPronosticos($metodo, $numPeriodos, $demanda);
}
?>
<?php
function calcularPronosticos($metodo, $numPeriodos, $demanda) {
    $pronosticos = array();

    // Implementar la lógica específica para cada método
    // y almacenar los resultados en el array $pronosticos

    return $pronosticos;
}
?>
<table>
    <tr>
        <th>Periodo</th>
        <th>Pronóstico</th>
    </tr>
    <?php
    for ($i = 1; $i <= $numPeriodos; $i++) {
        echo "<tr>";
        echo "<td>Periodo " . $i . "</td>";
        echo "<td>" . $pronosticos[$i - 1] . "</td>";
        echo "</tr>";
    }
    ?>
</table>




<!DOCTYPE html>
<html>
<head>
    <title>Resultado del Pronóstico</title>
</head>
<body>
    <h1>Resultado del Pronóstico</h1>

    <table>
        <tr>
            <th>Periodo</th>
            <th>Demanda</th>
            <th>Pronostico</th>
        </tr>
    <?php
    if ($_SERVER["REQUEST_METHOD"] == "POST") {
        $periodos=$_POST["periodos"];
        // $demandas = $_POST["demanda_periodo_"];
        $metodo = $_POST["metodo"]; // Obtener el método seleccionado desde el formulario

        $demandas = array();
        for ($i = 1; $i <= $periodos; $i++) {
            $demandas[] = $_POST["demanda_periodo_" . $i];
        }


        $n = intval($_POST["n_promedio_movil_simple"]);
        $t1 = floatval($_POST["t1_promedio_movil_ponderado"]);
        $t2 = floatval($_POST["t2_promedio_movil_ponderado"]);
        $t3 = floatval($_POST["t3_promedio_movil_ponderado"]);

        if (count($demandas) < max($n, 3)) {
            echo "<p>Error: No hay suficientes datos para el cálculo.</p>";
        } else {
            for ($i = 0; $i < count($demandas); $i++) {
                $periodo = $i + 1;
                $demanda = $demandas[$i];

                // Calcular el pronóstico en función del método seleccionado
                $pronostico = calcularPronostico($demandas, $i, $metodo, $t1, $t2, $t3, $n);

                echo "<tr><td>$periodo</td><td>$demanda</td><td>$pronostico</td></tr>";
            }
        }
    }
    function calcularPronostico($demandas, $indice, $metodo, $t1, $t2, $t3, $n) {
        $indice = max($indice, 0);

        if ($metodo === "promedio_movil_simple") {
            if ($indice < $n) {
                return ""; // No se pueden calcular pronósticos para los primeros $n periodos
            }
            $indice = max($indice, 0);
    
            // Calcula el promedio de las últimas "n+1" demandas sin contar la última
            $suma = 0;
            for ($i = $indice - $n; $i < $indice; $i++) {
                $suma += $demandas[$i];
                echo $demandas[$i];
            }
        
            return $suma / $n; // Calcula el promedio de las últimas "n+1" demandas
        } elseif ($metodo === "promedio_movil_ponderado") {
            if ($indice < 3) {
                return ""; // No se pueden calcular pronósticos para los primeros 3 periodos
            }
        
            $indice = max($indice, 0);
    
            // Calcula el promedio de las últimas "n+1" demandas sin contar la última
            $pron = null;
            for ($i = $indice - 2; $i < $indice; $i++) {
                
                    for ($j = 1; $j <= 3; $j++) {
                        $pron += $demandas[$i]*${"t$j"};
                        echo $demandas[$i];

                    }
                
            }
        
            return $pron; // Calcula el promedio de las últimas "n+1" demandas
        }
        
        return ""; // Método no reconocido
        
    }

    
    ?>
    </table>
</body>
</html>
